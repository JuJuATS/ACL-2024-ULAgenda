<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modifier un préréglage</title>
</head>
<body>
    <h1>Modifier le préréglage</h1>

    <%- include('../partials/flashMessages') %>

    <!-- Formulaire pour modifier le préréglage -->
    <form id="presetForm" action="/presets/<%= id %>?_method=PUT" method="POST">

        <label for="name">Nom :</label>
        <input type="text" id="name" name="name" value="<%= name %>" required><br>

        <label for="color">Couleur :</label>
        <input type="color" id="color" name="color" value="<%= color %>"><br>

        <label for="priority">Priorité :</label>
        <select id="priority" name="priority">
            <option value="Haute" <%= priority === 'Haute' ? 'selected' : '' %>>Haute</option>
            <option value="Moyenne" <%= priority === 'Moyenne' ? 'selected' : '' %>>Moyenne</option>
            <option value="Basse" <%= priority === 'Basse' ? 'selected' : '' %>>Basse</option>
        </select><br>

        <label for="recurrence">Récurrence :</label>
        <select id="recurrence" name="recurrence">
            <option value="Aucune" <%= recurrence === 'Aucune' ? 'selected' : '' %>>Aucune</option>
            <option value="Quotidienne" <%= recurrence === 'Quotidienne' ? 'selected' : '' %>>Quotidienne</option>
            <option value="Hebdomadaire" <%= recurrence === 'Hebdomadaire' ? 'selected' : '' %>>Hebdomadaire</option>
            <option value="Mensuelle" <%= recurrence === 'Mensuelle' ? 'selected' : '' %>>Mensuelle</option>
            <option value="Annuelle" <%= recurrence === 'Annuelle' ? 'selected' : '' %>>Annuelle</option>
        </select><br>

        <label for="duration">Durée par défaut (en minutes) :</label>
        <input type="number" id="duration" name="duration" value="<%= duration %>"><br>

        <label for="description">Description :</label>
        <textarea id="description" name="description"><%= description %></textarea><br>

        <button type="submit">Mettre à jour</button>
    </form>

    <form id="deletePresetForm" action="/presets/<%= id %>?_method=DELETE" method="POST" onsubmit="return confirmDelete()">
        <button type="submit" class="delete-button">Supprimer le préréglage</button>
    </form>

    <a href="/presets">Retourner à la liste</a>

    <script>
        function confirmDelete() {
            return confirm('Êtes-vous sûr de vouloir supprimer ce préréglage ? Cette action est irréversible.');
        }
    </script>
</body>
</html>
